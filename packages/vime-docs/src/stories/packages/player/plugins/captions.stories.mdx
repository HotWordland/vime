import { Meta } from '@storybook/addon-docs/blocks';
import LinkTo from "@storybook/addon-links/react";

<Meta title="Packages/Player/Plugins/Captions" />

# Captions `Plugin`

[View Source](https://github.com/vime-js/vime/blob/master/packages/vime-player/src/plugins/Captions.svelte)

**ID:** `vCaptions`

**ROLE:** `CAPTIONS`

This plugin renders and displays captions/subtitles that are set in the `tracks` prop. The current track 
is set by the `currentTrackIndex` and `locale` props. If you don't want `locale` changes to affect the 
captions, see the [`useLocale`](#uselocale-boolean) prop below.

ðŸ’¡ To see this plugin in action then go to 'Player/Components'.

## Setup

### `plugins`

```js
import { Captions } from '@vime-js/player';

player.plugins = [Captions];
```

### `PluginsManager`
```js
import { Captions } from '@vime-js/player';

player
  .getPluginsManager()
  .addPlugin(Captions)
  .then((captions) => {
    // ...
  });
```

## Props

### `useLocale: boolean`

**Default:** `true`

Whether `locale` changes should change the current track by looking for a track with a matching `srclang`.

### `crossorigin: boolean`

**Default:** `null`

This plugin creates a [track](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/track)
element to load text tracks and this prop is the [crossorigin](https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/crossorigin)
attribute set on it.

### `cues: VTTCue[]` `readonly`

**Default:** `[]`

All the cues for the current track (see [VTTCue](https://developer.mozilla.org/en-US/docs/Web/API/VTTCue)).

### `currentCueIndex: int` `readonly`

**Default:** `-1`

The index of the current cue. If it is `-1` then there are no cues.

### `currentCue: VTTCue` `readonly`

**Default:** `null`

The current cue (see [VTTCue](https://developer.mozilla.org/en-US/docs/Web/API/VTTCue)).

### `activeCues: VTTCue[]` `readonly`

**Default:** `[]`

The cues that are currently active. Cues are active if the `currentTime` is between the cues' 
`startTime` and `endTime`.

## Store

The following props are backed by a Svelte store which you can access via the `getStore` method.

- `cues`
- `currentCueIndex`
- `currentCue`
- `activeCues`

```js
const { cues } = player.vCaptions.getStore();
```

## Methods

### `getStore(): object`

See the [Store](#store) section above.

### `addCue(cue: VTTCue)`

Validates and adds a new cue.

### `addCues(cues: VTTCue[])`

Adds a list of cues using `addCue`.

### `removeCue(cue: VTTCue|int)`

Removes a cue provided the cue itself or its index.

### `removeCues(cues: (VTTCue|int)[])`

Removes a list of cues using `removeCue`.
